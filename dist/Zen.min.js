/*!
 * Zen.js v1.0.0-alpha.0
 * (c) 2018 Zhang_Wei
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var c=Array.isArray,i=Object.defineProperty;function o(t,e,n,r){c(t)&&t instanceof Array?t.forEach(function(t){o(t,e,n,r)}):i(t,e,Object.assign({},n,r))}var a={configurable:!0,enumerable:!1,writable:!0},t={configurable:!0,enumerable:!1};function e(t,e,n,r){return o(t,e,{value:n},r||a),n}var n=Array.prototype;function l(t,e,n){var r;return t.length>e&&void 0!==(r=t[e])?r:n}function u(t,e){var n=t.length;return e<n?Array.from(t).$get(e,n):[]}function s(t){return"function"==typeof t}function f(t,e){return t===e}function p(t,e){return t==e}e(n,"$get",function(){var t=l(arguments,0,0),e=arguments[1];return null==e?this[t]:this.slice(t,e)}),e(n,"$add",function(t){for(var e=0,n=u(arguments,1),r=n.length;e<r;e++)this.splice(t++,0,n[e]);return this}),e(Array,"$create",function(t,e){var n=0,r=[];for(t>>=0;n<t;n++)r.push(e&&s(e)?e(n):e);return r}),e(n,"$delete",function(t){var e=l(arguments,1,1);return this.splice(t,e),this}),e(n,"$deleteValue",function(t){for(var e=l(arguments,1,!0)?f:p,n=0,r=this.length;n<r;)e(this[n],t)?(this.$delete(n),r--):n++;return this}),e(n,"$each",function(t){for(var e,n=0,r=this.length;n<r&&(e=this[n],!1!==t.call(e,e,n,this));n++);return this}),e(n,"$inArray",function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return!0;return!1}),"push_unshift_pop_shift".split("_").forEach(function(t){e(n,"$"+t,function(){return this[t].apply(this,arguments),this})}),e(document,"$ready",function(n,r){if("complete"===this.readyState||"loading"!==this.readyState&&!this.documentElement.doScroll)return n.apply(window,r);this.addEventListener("DOMContentLoaded",function t(e){this.removeEventListener(e.type,t),n.apply(window,r)})});var r=Element.prototype,h=[window,document,r];function d(t){for(var e in t)return!1;return!0}function v(t){return null!==t&&"object"==typeof t}function g(t){return t[t]||(t[t]={})}e(Object,"$isEmptyObject",d),e(h,"$data",function t(e,n,r){var i=g(this);if(v(e)){for(var o in e)t.call(this,o,e[o],n);return this}return arguments.length<2||r?null==e?i:!r||e in i?i[e]:i[e]=n:(i[e]=n,this)}),e(h,"$hasData",function(t){var e=g(this);return!d(e)&&(null==t||t in e)}),e(h,"$deleteData",function(t){if(null==t)return this[this]={},this;var e=g(this);return t.split(" ").forEach(function(t){delete e[t]}),this});var y=/^([^.]*)(?:\.(.+)|)/,m=Object.prototype,b=m.toString,$=Object.getPrototypeOf,E=Object.hasOwnProperty,j=E.toString,w=j.call(Object);function O(t){if(!t||"[object Object]"!==b.call(t))return!1;var e=$(t);if(!e)return!0;var n=E.call(e,"constructor")&&e.constructor;return s(n)&&j.call(n)===w}function S(){for(var t,e,n,r,i,o,a=1,u=arguments.length,s=arguments[0]||{};a<u;a++)if(null!=(t=arguments[a]))for(e in t)(r=t[e])!==s&&(n=s[e],r&&(O(r)||(i=c(r)))?(i?(i=!1,o=n&&c(n)?n:[]):o=n&&O(n)?n:{},s[e]=S(o,r)):void 0!==r&&(s[e]=r));return s}e(Object,"$isPlainObject",O),e(Object,"$assign",S);var P=Object.create;function A(t){return"boolean"==typeof t}function C(t){var e=u(arguments,1);return A(t)||!t?e.unshift(t?P(null):{}):e.unshift({},t),S.apply(null,e)}e(Object,"$create",C);var L=window.Zen=C(!0,{version:"1.0.0-alpha.0"});function D(){return!1}function T(){return!0}function _(t,e){if(this instanceof L.Event==!1)return new L.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?T:D,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S(this,e),this.timeStamp=t&&t.timeStamp||Date.now()}L.Event=_,L.Event.prototype={constructor:L.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,isSimulated:!1},[["preventDefault","isDefaultPrevented"],["stopPropagation","isPropagationStopped"],["stopImmediatePropagation","isImmediatePropagationStopped"]].forEach(function(t){var e=t[0],n=t[1];this[e]=function(){var t;this[n]()||(this[n]=T,!this.isSimulated&&(t=this.originalEvent)&&t[e]())}}.bind(L.Event.prototype));(function(t,e){}).bind(L.Event.prototype);e(m,"$set",function(t,e){var n;if(v(t))for(n in t)this[n]=t[n];else this[t]=e;return this});var k=Array.from;var x=L.EventListener={add:function(t,e,n,r,i){for(var o,a,u,s=t.$data("events",{},!0),c=e.length;c--;)(a=(o=y.exec(e[c])||[""])[1])&&(u={elem:t,type:a,listener:r,selector:n,options:i,namespace:(o[2]||"").split(".").sort(),handle:function(){return L.EventListener.dispatch.apply(u,arguments)}},(s[a]||(s[a]=[])).push(u),i.passive?t.addEventListener(a,u.handle,i):t.addEventListener(a,u.handle,i.capture||!1))},dispatch:function(t){var e=this.elem,n=t instanceof _?t:new _(t),r=Array.from(arguments).$set(0,n);n.delegateTarget=e,n.handleOptions=this;var i=n.type,o=this.selector,a=this.needsContext;if(o&&!("click"===i&&1<=n.button)){for(var u=n.target;u!==e;u=u.parentNode||this)if(1===u.nodeType&&("click"!==i||!0!==u.disabled))if(a){if(k(e.querySelectorAll(o)).includes(u)){e=u;break}}else if(u.matches(o)){e=u;break}if(n.delegateTarget===e)return}var s=this.listener.apply(e,r);return!1===s&&(n.preventDefault(),n.stopPropagation()),s}},I=/[^\x20\t\r\n\f]+/g,M=!1;try{var N=i({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,N)}catch(t){}function R(t){return"string"==typeof t}e(EventTarget.prototype,"$on",function(t,e,n,r){return function t(e,n,r,i,o){var a;if(v(n)?(a=n,R(r)?o=i:(o=r,r=void 0)):v(r)&&(a=r,r=n,o=i),a){for(var u in a)t(e,u,r,a[u],o);return e}if(0==n||null==n)return e;if(null==(n=n.match(I))||0===n.length)return e;if(!R(r)){var s=[r,i];i=s[0],R(r=s[1])||(o=r,r=void 0)}if(null==i)return e;if(A(i)&&(i=i?T:D),!i)return e;if(A(o)&&(o={capture:o}),o=o||{},Object.keys(o).forEach(function(t){o[t]?o[t]=!0:delete o[t]}),"once"in o){var c=i;i=function(t){return e.$off(t),c.apply(this,arguments)},delete o.once}return"passive"in o&&!M&&delete o.passive,x.add(e,n,r,i,o),e}(this,t,e,n,r)}),e(Math,"$mean",function(){return Array.from(arguments).reduce(function(t,e){return t+e})/arguments.length});var U=Math.random,V=Math.floor;function q(t){var e=l(t,0,9),n=l(t,1,0);if(n<e){var r=[n,e];e=r[0],n=r[1]}return[e,n]}function F(t,e){return V(U()*(e-t+1)+t)}function z(){var t=q(arguments);return F(t[0],t[1])}e(Math,"$random",z);var Z,B=Math.abs;function G(){return this}e(Math,"$randomPlus",function(){var t=q(arguments),e=t[0],n=t[1];return 0<e?F(e,n):n<(t=F(0,n+B(e)))?n-t:t}),e(Number,"$isNumber",function(t){return e=t,!("[object Number]"!==b.call(e)&&"string"!=typeof t||isNaN(t-parseFloat(t)));var e}),e(m,"$delete",function(){var e=this;return Array.from(arguments).$each(function(t){delete e[t]}),this}),e(m,"$deleteValue",function(t){var e,n=l(arguments,1,!0)?f:p;for(e in this)n(this[e],t)&&delete this[e];return this}),e(Object,"$each",function(t,e){var n,r;for(n in t)if(r=t[n],!1===e.call(r,n,r,t))break;return t}),e(m,"$get",function(t){return this[t]}),e(m,"$self",G),o(m,"__self__",{get:G},Z||t);var H=String.fromCharCode;function J(){var t=l(arguments,0,!1);return H(t?z(65,90):z(97,122))}e(String,"$random",J);var K=/([\.\*\+\?\|\(\)\[\]\{\}\^\$])/g,Q=String.prototype;e(Q,"$replaceAll",function(t,e){var n,r="g";if(n=t,"[object RegExp]"===b.call(n)){if(t.global)return this.replace(t,e);r+=t.flags||"",t=t.source}else t=t.replace(K,"\\$1");return this.replace(new RegExp(t,r),e)}),e(String,"$someRandom",function(){for(var t="",e=l(arguments,0,12),n=l(arguments,1,!1),r=l(arguments,2,!1);0<e--;)t+=J();return n&&(t=t.split("").map(function(t){return z(1)?t.toUpperCase():t}).join()),r&&(t=t.split("").map(function(t){return z(1)?U():t}).$set(0,J(z(1))).join()),t}),e(Q,"$toCapitalize",function(){return this.substr(0,1).toUpperCase()+this.substr(1).toLowerCase()});var W=/\+/g;function X(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e(window,"$querystring",{stringify:function(e){var t=l(arguments,1,"&"),n=l(arguments,2,"=");return v(e)?Object.keys(e).map(function(t){return encodeURIComponent(X(t))+n+encodeURIComponent(X(e[t]))}).join(t):""},parse:function(t){var e=l(arguments,1,"&"),n=l(arguments,2,"="),r={};if(!R(t))return r;for(var i,o,a,u=0,s="",c=t.split(e),f=c.length;u<f;u++)-1<(s=(a=c[u].replace(W,"%20")).indexOf(n))?(i=a.substr(0,s),o=a.substr(s+1)):i=a,i=decodeURIComponent(i),o=decodeURIComponent(o),r[i]=o;return r}}),e(window,"$ready",function(n,r){if("complete"===this.document.readyState)return n.apply(this,r);this.addEventListener("load",function t(e){this.removeEventListener(e.type,t),n.apply(this,r)})}),e(window,"$typeof",function(t){var e;return null==t?t+"":"object"==(e=typeof t)&&c(t)?"array":e});var Y=1;i(L,"guid",{get:function(){return Y++}})});