/*!
 * Zen.js v2.0.0-beta.0
 * (c) 2018 Zhang_Wei
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var c=Array.isArray,a=Object.defineProperty;function f(t){return null!==t&&"object"==typeof t}function o(t,e,n,r){var i;if(c(t)&&t instanceof Array)t.forEach(function(t){return o(t,e,n,r)});else if(f(e))for(i in e)o(t,i,e[i],n);else a(t,e,Object.assign({},n,r))}var u={configurable:!0,enumerable:!1,writable:!0},s={configurable:!0,enumerable:!1};function l(t,e,n,r){var i;if(f(e)){for(i in e)l(t,i,e[i],r);return e}return o(t,e,{value:n},r||u),n}var e=Array.prototype;function h(t,e,n){var r;return t.length>e&&void 0!==(r=t[e])?r:n}function i(t){var e=h(arguments,1,0),n=t.length;return e<n?Array.from(t).$get(e,n):[]}function p(t){return"function"==typeof t}function d(t,e){return t===e}function v(t,e){return t==e}function n(t){for(var e in t)return!1;return!0}l(e,"$get",function(){var t=h(arguments,0,0),e=arguments[1];return null==e?this[t]:this.slice(t,e+t)}),l(e,"$add",function(t){for(var e=0,n=i(arguments,1),r=n.length;e<r;e++)this.splice(t++,0,n[e]);return this}),l(Array,"$create",function(t,e){var n=0,r=[];for(t>>=0;n<t;n++)r.push(e&&p(e)?e(n):e);return r}),l(e,"$delete",function(t){var e=h(arguments,1,1);return this.splice(t,e),this}),l(e,"$deleteValue",function(t){for(var e=h(arguments,1,!0)?d:v,n=0,r=this.length;n<r;)e(this[n],t)?(this.$delete(n),r--):n++;return this}),l(e,"$each",function(t){for(var e,n=0,r=this.length;n<r&&(e=this[n],!1!==t.call(e,e,n,this));n++);return this}),l(e,"$equals",function(t){if(!t)return!1;var e=0,n=this.length;if(n!==t.length)return!1;for(var r=h(arguments,1,!0)?d:v;e<n;e++)if(!r(this[e],t[e]))return!1;return!0}),l(e,"$inArray",function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return!0;return!1}),"push_unshift_pop_shift".split("_").forEach(function(t){l(e,"$"+t,function(){return this[t].apply(this,arguments),this})}),l(document,"$ready",function(n,r){if("complete"===this.readyState||"loading"!==this.readyState&&!this.documentElement.doScroll)return n.apply(window,r);this.addEventListener("DOMContentLoaded",function t(e){this.removeEventListener(e.type,t),n.apply(window,r)})}),l(Object,"$isEmptyObject",n);var t=EventTarget.prototype;function g(t){return t[t]||(t[t]={})}l(t,"$data",function t(e,n,r){var i=g(this);if(f(e)){for(var a in e)t.call(this,a,e[a],n);return this}return arguments.length<2||r?null==e?i:!r||e in i?i[e]:i[e]=n:(i[e]=n,this)}),l(t,"$hasData",function(t){var e=g(this);return!n(e)&&(null==t||t in e)}),l(t,"$deleteData",function(t){if(null==t)return this[this]={},this;var e=g(this);return t.split(" ").forEach(function(t){delete e[t]}),this});var y=/^([^.]*)(?:\.(.+)|)/,r=Object.prototype,m=r.toString,b=Object.getPrototypeOf,$=Object.hasOwnProperty,E=$.toString,j=E.call(Object);function O(t){if(!t||"[object Object]"!==m.call(t))return!1;var e=b(t);if(!e)return!0;var n=$.call(e,"constructor")&&e.constructor;return p(n)&&E.call(n)===j}function w(){for(var t,e,n,r,i,a,o=1,u=arguments.length,s=arguments[0]||{};o<u;o++)if(null!=(t=arguments[o]))for(e in t)(r=t[e])!==s&&(n=s[e],r&&(O(r)||(i=c(r)))?(i?(i=!1,a=n&&c(n)?n:[]):a=n&&O(n)?n:{},s[e]=w(a,r)):void 0!==r&&(s[e]=r));return s}l(Object,"$isPlainObject",O),l(Object,"$assign",w);var S=Object.create;function P(t){return"boolean"==typeof t}function T(t){var e=i(arguments,1);return P(t)||!t?e.unshift(t?S(null):{}):e.unshift({},t),w.apply(null,e)}l(Object,"$create",T);var C=window.Zen=window.ZenJS=T(!0,{version:"2.0.0-beta.0"});function L(){return!1}function A(){return!0}l(r,"$set",function(t,e){var n;if(f(t))for(n in t)this[n]=t[n];else this[t]=e;return this});var D=Object.assign;function x(t,e){if(this instanceof C.Event==!1)return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?A:L,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w(this,e),this.timeStamp=t&&t.timeStamp||Date.now()}C.Event=x;var k=C.Event.prototype={constructor:C.Event,isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L,isSimulated:!1};function N(e,t,n){a(k,e,D({},s,{get:t||function(){var t=this.originalEvent;if(t)return t[e]},set:n||function(t){this[e]=t}}))}[["preventDefault","isDefaultPrevented"],["stopPropagation","isPropagationStopped"],["stopImmediatePropagation","isImmediatePropagationStopped"]].forEach(function(t){var e=t[0],n=t[1];k[e]=function(){var t;k[n]()||(k[n]=A,!k.isSimulated&&(t=k.originalEvent)&&t[e]())}}),x.addProp=N,["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches"].forEach(function(t){return N(t)});var R=/[^\x20\t\r\n\f]+/g;var I=C.EventListener=T(!0,{add:function(t,e,n,r,i){for(var a,o,u,s,c=t.$data("events",{},!0),f=e.length,l=r.guid||(r.guid=C.guid);f--;)(o=(a=y.exec(e[f])||[])[1])&&(u=(a[2]||"").split(".").sort(),s={elem:t,type:o,guid:l,listener:r,selector:n,options:i,namespace:u,namespaceStr:u.join("."),handle:function(){return C.EventListener.dispatch.apply(s,arguments)}},(c[o]||(c[o]=[])).push(s),i.passive?t.addEventListener(o,s.handle,i):t.addEventListener(o,s.handle,i.capture||!1))},dispatch:function(t){var e=this.elem,n=t instanceof x?t:new x(t),r=Array.from(arguments).$set(0,n);n.delegateTarget=e,n.handleOptions=this;var i=n.type,a=this.selector;if(this.needsContext,a&&!("click"===i&&1<=n.button)){for(var o=n.target;o!==e;o=o.parentNode||e)if(1===o.nodeType&&("click"!==i||!0!==o.disabled)&&o.matches(a)){e=n.currentTarget=o;break}if(n.delegateTarget===e)return}var u=this.listener.apply(e,r);return!1===u&&(n.preventDefault(),n.stopPropagation()),u},remove:function t(e,n,r,i,a){if(e.$hasData("events")){n=(n||"").match(R)||[""];for(var o,u,s,c,f,l,h=e.$data("events"),p=n.length;p--;)if(u=(o=y.exec(n[p])||[])[1]){for(s=(o[2]||"").split(".").sort(),f=(c=h[u]||[]).length,o=o[2]&&new RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");f--;)l=c[f],(r&&r.guid!==l.guid||o&&!o.test(l.namespaceStr)||!i?!l.selector:"**"===i||("*"===i?l.selector:i===l.selector))&&(e.removeEventListener(u,l.listener),c.splice(f,1));0===c.length&&delete h[u]}else for(u in h)t(e,u+n[p],r,i,!0)}}}),_=!1;try{var M=a({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,M)}catch(t){}function U(t){return"string"==typeof t}function q(e,t,n,r,i){var a;if(f(t)?(a=t,U(n)?i=r:(i=n,n=void 0)):f(n)&&(a=n,n=t,i=r),a){for(var o in a)q(e,o,a[o],n,i);return e}if(!t)return e;if(null==(t=t.match(R))||0===t.length)return e;if(!U(n)){var u=[n,r];r=u[0],(n=u[1])&&!U(n)&&(i=n,n=void 0)}if(null==r)return e;if(P(r)&&(r=r?A:L),!r)return e;if(P(i)&&(i={capture:i}),i=i||{},Object.keys(i).forEach(function(t){i[t]?i[t]=!0:delete i[t]}),!0===this||"one"in i||"once"in i){var s=r;(r=function(t){return e.$off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid),delete i.one,delete i.once}return"passive"in i&&!_&&delete i.passive,I.add(e,t,n,r,i),e}function F(t,e,n,r){return q.call(!0,this,t,e,n,r)}l(t,{$on:function(t,e,n,r){return q(this,t,e,n,r)},$one:F,$once:F,$off:function t(e,n,r){var i,a;if(e&&e.preventDefault&&(i=e.handleOptions))return t.call(e.delegateTarget,i.namespace?i.type+"."+i.namespace.join("."):i.type,i.selector,i.listener),this;if(f(e)){for(a in e)t.call(this,a,n,e[a]);return this}return P(r)&&(r=r?A:L),C.EventListener.remove(this,e,r,n),this}}),l(Math,"$mean",function(){return Array.from(arguments).reduce(function(t,e){return t+e})/arguments.length});var K=Math.random,X=Math.floor;function Y(t){var e=h(t,0,9),n=h(t,1,0);return n<e?[n,e]:[e,n]}function V(t,e){return X(K()*(e-t+1)+t)}function J(){var t=Y(arguments);return V(t[0],t[1])}l(Math,"$random",J);var Z=Math.abs;function z(t){return"[object Number]"===m.call(t)}l(Math,"$randomPlus",function(){var t=Y(arguments),e=t[0],n=t[1];return 0<e?V(e,n):n<(t=V(0,n+Z(e)))?n-t:t}),l(Number,"$isNumber",function(t){return!(!z(t)&&"string"!=typeof t||isNaN(t-parseFloat(t)))}),l(r,"$delete",function(){var e=this;return Array.from(arguments).$each(function(t){delete e[t]}),this}),l(r,"$deleteValue",function(t){var e,n=h(arguments,1,!0)?d:v;for(e in this)n(this[e],t)&&delete this[e];return this}),l(Object,"$each",function(t,e){var n,r;for(n in t)if(r=t[n],!1===e.call(r,n,r,t))break;return t});var B=Object.keys,G=JSON.stringify;function H(){return this}l(Object,"$equals",function(t,e){return t===e||!!t&&!!function t(e,n){if(m.call(e)!==m.call(n))return!1;if(B(e).length!==B(n).length)return!1;var r,i,a;for(r in e)if((i=e[r])!==(a=n[r])){if(!i||i===e)return!1;if(O(i)||c(i)){if(!t(i,a))return!1}else try{if(G(i)!==G(a))return!1}catch(t){return!1}}return!0}(t,e)}),l(r,"$get",function(t){return this[t]}),l(r,"$self",H),function t(e,n,r,i){var a;if(f(n)){for(a in n)t(e,a,n[a],i);return n}return o(e,n,{get:r},i||s),r}(r,"__self__",H);var Q=String.fromCharCode;function W(){var t=h(arguments,0,!1);return Q(t?J(65,90):J(97,122))}function tt(t){return"[object RegExp]"===m.call(t)}l(String,"$random",W);var et=/([\.\*\+\?\|\(\)\[\]\{\}\^\$])/g,nt=String.prototype;l(nt,"$replaceAll",function(t,e){var n="g";if(tt(t)){if(t.global)return this.replace(t,e);n+=t.flags||"",t=t.source}else t=t.replace(et,"\\$1");return this.replace(new RegExp(t,n),e)}),l(String,"$someRandom",function(){for(var t="",e=h(arguments,0,12),n=h(arguments,1,!1),r=h(arguments,2,!1);0<e--;)t+=W();return n&&(t=t.split("").map(function(t){return J(1)?t.toUpperCase():t}).join("")),r&&(t=(t[0]||"")+t.slice(1).split("").map(function(t){return J(1)?J():t}).join("")),t}),l(nt,"$toCapitalize",function(){return this.substr(0,1).toUpperCase()+this.substr(1).toLowerCase()});var rt=/\+/g;function it(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}l(window,"$querystring",{stringify:function(e){var t=h(arguments,1,"&"),n=h(arguments,2,"=");return f(e)?Object.keys(e).map(function(t){return encodeURIComponent(it(t))+n+encodeURIComponent(it(e[t]))}).join(t):""},parse:function(t){var e=h(arguments,1,"&"),n=h(arguments,2,"="),r={};if(!U(t))return r;for(var i,a,o,u,s=0,c=t.split(e),f=c.length;s<f;s++)-1<(u=(o=c[s].replace(rt,"%20")).indexOf(n))?(i=o.substr(0,u),a=o.substr(u+1)):i=o,i=decodeURIComponent(i),a=decodeURIComponent(a),r[i]=a;return r}}),l(window,"$ready",function(n,r){if("complete"===this.document.readyState)return n.apply(this,r);this.addEventListener("load",function t(e){this.removeEventListener(e.type,t),n.apply(this,r)})}),l(window,"$typeof",function(t){var e;return null==t?t+"":"object"==(e=typeof t)&&c(t)?"array":e});var at=1;a(C,"guid",{get:function(){return at++}});var ot=C.util=T(!0);ot.is=T(!0,{equals:v,congruence:d}),ot.types=T(!0,{isArray:c,isBoolean:P,isFunction:p,isNumber:z,isObject:f,isRegExp:tt,isString:U}),ot.parameters=T(!0,{default:h,rest:i}),ot.fn=T(!0,{returnTrue:A,returnFalse:L}),ot.supports=T(!0,{passiveEvent:_})});