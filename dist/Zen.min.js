/*!
 * Zen.js v2.0.0-beta.0
 * (c) 2018 Zhang_Wei
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var c=Array.isArray,o=Object.defineProperty;function f(e){return null!==e&&"object"==typeof e}function a(e,t,n,r){var i;if(c(e)&&e instanceof Array)e.forEach(function(e){return a(e,t,n,r)});else if(f(t))for(i in t)a(e,i,t[i],n);else o(e,t,Object.assign({},n,r))}var u={configurable:!0,enumerable:!1,writable:!0},s={configurable:!0,enumerable:!1};function l(e,t,n,r){var i;if(f(t)){for(i in t)l(e,i,t[i],r);return t}return a(e,t,{value:n},r||u),n}var t=Array.prototype;function h(e,t,n){var r;return e.length>t&&void 0!==(r=e[t])?r:n}function i(e){var t=h(arguments,1,0),n=e.length;return t<n?Array.from(e).$get(t,n):[]}function p(e){return"function"==typeof e}function d(e,t){return e===t}function v(e,t){return e==t}function n(e){for(var t in e)return!1;return!0}l(t,"$get",function(){var e=h(arguments,0,0),t=arguments[1];return null==t?this[e]:this.slice(e,t+e)}),l(t,"$add",function(e){for(var t=0,n=i(arguments,1),r=n.length;t<r;t++)this.splice(e++,0,n[t]);return this}),l(Array,"$create",function(e,t){var n=0,r=[];for(e>>=0;n<e;n++)r.push(t&&p(t)?t(n):t);return r}),l(t,"$delete",function(e){var t=h(arguments,1,1);return this.splice(e,t),this}),l(t,"$deleteValue",function(e){for(var t=h(arguments,1,!0)?d:v,n=0,r=this.length;n<r;)t(this[n],e)?(this.$delete(n),r--):n++;return this}),l(t,"$each",function(e){for(var t,n=0,r=this.length;n<r&&(t=this[n],!1!==e.call(t,t,n,this));n++);return this}),l(t,"$equals",function(e){if(!e)return!1;var t=0,n=this.length;if(n!==e.length)return!1;for(var r=h(arguments,1,!0)?d:v;t<n;t++)if(!r(this[t],e[t]))return!1;return!0}),l(t,"$inArray",function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return!0;return!1}),"push_unshift_pop_shift".split("_").forEach(function(e){l(t,"$"+e,function(){return this[e].apply(this,arguments),this})}),l(document,"$ready",function(n,r){if("complete"===this.readyState||"loading"!==this.readyState&&!this.documentElement.doScroll)return n.apply(window,r);this.addEventListener("DOMContentLoaded",function e(t){this.removeEventListener(t.type,e),n.apply(window,r)})}),l(Object,"$isEmptyObject",n);var e=Element.prototype,r="EventTarget"in window,g=r?window.EventTarget.prototype:[window,document,e];function E(e){return e.__ZENJS_DATA__||(l(e,"__ZENJS_DATA__",{}),e.__ZENJS_DATA__)}r?(l(g,"__ZENJS_EVENT_ADD__",g.addEventListener),l(g,"__ZENJS_EVENT_REMOVE__",g.removeEventListener)):g.forEach(function(e){l(e,"__ZENJS_EVENT_ADD__",e.addEventListener),l(e,"__ZENJS_EVENT_REMOVE__",e.removeEventListener)}),l(g,"$data",function e(t,n,r){var i=E(this);if(f(t)){for(var o in t)e.call(this,o,t[o],n);return this}return arguments.length<2||r?null==t?i:!r||t in i?i[t]:i[t]=n:(i[t]=n,this)}),l(g,"$hasData",function(e){var t=E(this);return!n(t)&&(null==e||e in t)}),l(g,"$deleteData",function(e){if(null==e)return this.__ZENJS_DATA__={},this;var t=E(this);return e.split(" ").forEach(function(e){delete t[e]}),this});var _=/^([^.]*)(?:\.(.+)|)/,m=Object.prototype,y=m.toString,b=Object.getPrototypeOf,$=Object.hasOwnProperty,S=$.toString,j=S.call(Object);function N(e){if(!e||"[object Object]"!==y.call(e))return!1;var t=b(e);if(!t)return!0;var n=$.call(t,"constructor")&&t.constructor;return p(n)&&S.call(n)===j}function w(){for(var e,t,n,r,i,o,a=1,u=arguments.length,s=arguments[0]||{};a<u;a++)if(null!=(e=arguments[a]))for(t in e)(r=e[t])!==s&&(n=s[t],r&&(N(r)||(i=c(r)))?(i?(i=!1,o=n&&c(n)?n:[]):o=n&&N(n)?n:{},s[t]=w(o,r)):void 0!==r&&(s[t]=r));return s}l(Object,"$isPlainObject",N),l(Object,"$assign",w);var O=Object.create;function T(e){return"boolean"==typeof e}function D(e){var t=i(arguments,1);return T(e)||!e?t.unshift(e?O(null):{}):t.unshift({},e),w.apply(null,t)}l(Object,"$create",D);var A=window.Zen=window.ZenJS=D(!0,{version:"2.0.0-beta.0"});function L(){return!1}function P(){return!0}l(m,"$set",function(e,t){var n;if(f(e))for(n in e)this[n]=e[n];else this[e]=t;return this});var V=Object.assign;function J(e,t){if(this instanceof A.Event==!1)return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?P:L,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w(this,t),this.timeStamp=e&&e.timeStamp||Date.now()}A.Event=J;var Z=A.Event.prototype={constructor:A.Event,isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L,isSimulated:!1};[["preventDefault","isDefaultPrevented"],["stopPropagation","isPropagationStopped"],["stopImmediatePropagation","isImmediatePropagationStopped"]].forEach(function(e){var t=e[0],n=e[1];Z[t]=function(){var e;Z[n]()||(Z[n]=P,!Z.isSimulated&&(e=Z.originalEvent)&&e[t]())}});var R=J.addProp=function(t,e,n){o(Z,t,V({},s,{get:e||function(){var e=this.originalEvent;if(e)return e[t]},set:n||function(e){this[t]=e}}))};["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches"].forEach(function(e){return R(e)});var C=/[^\x20\t\r\n\f]+/g;var x=A.EventListener=D(!0,{add:function(e,t,n,r,i){for(var o,a,u,s,f=e.$data("events",{},!0),c=t.length,l=r.guid||(r.guid=A.guid);c--;)(a=(o=_.exec(t[c])||[])[1])&&(u=(o[2]||"").split(".").sort(),s={elem:e,type:a,guid:l,listener:r,selector:n,options:i,namespace:u,namespaceStr:u.join("."),handle:function(){return A.EventListener.dispatch.apply(s,arguments)}},(f[a]||(f[a]=[])).push(s),i.passive?e.__ZENJS_EVENT_ADD__(a,s.handle,i):e.__ZENJS_EVENT_ADD__(a,s.handle,i.capture||!1))},dispatch:function(e){var t=this.elem,n=e instanceof J?e:new J(e),r=Array.from(arguments).$set(0,n);n.delegateTarget=t,n.handleOptions=this;var i=n.type,o=this.selector;if(this.needsContext,o&&!("click"===i&&1<=n.button)){for(var a=n.target;a!==t;a=a.parentNode||t)if(1===a.nodeType&&("click"!==i||!0!==a.disabled)&&a.matches(o)){t=n.currentTarget=a;break}if(n.delegateTarget===t)return}var u=this.listener.apply(t,r);return!1===u&&(n.preventDefault(),n.stopPropagation()),u},remove:function e(t,n,r,i){if(t.$hasData("events")){n=(n||"").match(C)||[""];for(var o,a,u,s,f,c,l=t.$data("events"),h=n.length;h--;)if(a=(o=_.exec(n[h])||[])[1]){for(u=(o[2]||"").split(".").sort().join("."),f=(s=l[a]||[]).length,o=o[2]&&new RegExp("^"+u+"$");f--;)c=s[f],r&&r.guid!==c.guid||o&&!o.test(c.namespaceStr)||(i?"**"===i||"*"===i&&c.selector||i===c.selector:!c.selector)&&(t.__ZENJS_EVENT_REMOVE__(a,c.handle),s.splice(f,1));0===s.length&&delete l[a]}else for(a in l)e(t,a+n[h],r,i)}},emit:function(e,t){if(e.$hasData("events")){t=(t||"").match(C)||[""];for(var n,r,i,o,a,u,s=e.$data("events"),f=t.length;f--;)if(r=(n=_.exec(t[f])||[])[1])for(i=(n[2]||"").split(".").sort().join(),a=(o=s[r]||[]).length,n=n[2]&&new RegExp("^"+i+"$");a--;)u=o[a],n&&!n.test(u.namespaceStr)||u.selector||u.handle(r)}}}),M=!1;try{var k=o({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,k)}catch(e){}function I(e){return"string"==typeof e}function U(t,e,n,r,i){var o;if(f(e)?(o=e,I(n)?i=r:(i=n,n=r)):f(n)&&(o=n,n=e,i=r),o){for(var a in o)U(t,a,o[a],n,i);return t}if(!e)return t;if(null==(e=e.match(C))||0===e.length)return t;if(!I(n)){var u=[n,r];r=u[0],(n=u[1])&&!I(n)&&(i=n,n=void 0)}if(null==r)return t;if(T(r)&&(r=r?P:L),!r)return t;if(T(i)&&(i={capture:i}),i=i||{},Object.keys(i).forEach(function(e){i[e]?i[e]=!0:delete i[e]}),!0===this||"one"in i||"once"in i){var s=r;(r=function(e){return t.$off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=A.guid),delete i.one,delete i.once}return"passive"in i&&!M&&delete i.passive,x.add(t,e,n,r,i),t}function q(e,t,n,r){return U.call(!0,this,e,t,n,r)}l(g,{$on:function(e,t,n,r){return U(this,e,t,n,r)},$one:q,$once:q,$off:function e(t,n,r){var i;if(t&&t.preventDefault&&(i=t.handleOptions))return e.call(t.delegateTarget,i.namespace?i.type+"."+i.namespace.join("."):i.type,i.selector,i.listener),this;if(f(t)){for(var o in t)e.call(this,o,n,t[o]);return this}return"*"!==t&&"**"!==t||(n=t,t=void 0),T(r)&&(r=r?P:L),A.EventListener.remove(this,t,r,n),this},$emit:function(e){return A.EventListener.emit(this,e),this}}),l(Math,"$mean",function(){return Array.from(arguments).reduce(function(e,t){return e+t})/arguments.length});var F=Math.random,K=Math.floor;function X(e){var t=h(e,0,9),n=h(e,1,0);return n<t?[n,t]:[t,n]}function Y(e,t){return K(F()*(t-e+1)+e)}function z(){var e=X(arguments);return Y(e[0],e[1])}l(Math,"$random",z);var B=Math.abs;function W(e){return"[object Number]"===y.call(e)}l(Math,"$randomPlus",function(){var e=X(arguments),t=e[0],n=e[1];return 0<t?Y(t,n):n<(e=Y(0,n+B(t)))?n-e:e}),l(Number,"$isNumber",function(e){return!(!W(e)&&"string"!=typeof e||isNaN(e-parseFloat(e)))}),l(m,"$delete",function(){var t=this;return Array.from(arguments).$each(function(e){delete t[e]}),this}),l(m,"$deleteValue",function(e){var t,n=h(arguments,1,!0)?d:v;for(t in this)n(this[t],e)&&delete this[t];return this}),l(Object,"$each",function(e,t){var n,r;for(n in e)if(r=e[n],!1===t.call(r,n,r,e))break;return e});var G=Object.keys,H=JSON.stringify;function Q(){return this}l(Object,"$equals",function e(t,n,r){var i,o,a,u,s,f;if(t===n)return!0;if(!t||r&&r===t)return!1;if(y.call(t)!==y.call(n))return!1;if("object"!=(f=typeof t)&&"function"!==f)return!1;if(N(t)||(u=c(t)))if(u){if(t.length!==n.length)return!1;for(i=0,o=t.length;i<o;i++)if(!e(t[i],n[i],t))return!1}else{if(G(t).length!==G(n).length)return!1;for(a in t)if(!e(t[a],n[a],t))return!1}else if(p(t.toString)&&!(s=t.toString()).startsWith("[object ")){if(n.toString()!==s)return!1}else try{if(H(t)!==H(n))return!1}catch(e){return!1}return!0}),l(m,"$get",function(e){return this[e]}),l(m,"$self",Q),function e(t,n,r,i){var o;if(f(n)){for(o in n)e(t,o,n[o],i);return n}return a(t,n,{get:r},i||s),r}(m,"__self__",Q);var ee=String.fromCharCode;function te(){var e=h(arguments,0,!1);return ee(e?z(65,90):z(97,122))}function ne(e){return"[object RegExp]"===y.call(e)}l(String,"$random",te);var re=/([\.\*\+\?\|\(\)\[\]\{\}\^\$])/g,ie=String.prototype;l(ie,"$replaceAll",function(e,t){var n="g";if(ne(e)){if(e.global)return this.replace(e,t);n+=e.flags||"",e=e.source}else e=e.replace(re,"\\$1");return this.replace(new RegExp(e,n),t)}),l(String,"$someRandom",function(){for(var e="",t=h(arguments,0,12),n=h(arguments,1,!1),r=h(arguments,2,!1);0<t--;)e+=te();return n&&(e=e.split("").map(function(e){return z(1)?e.toUpperCase():e}).join("")),r&&(e=(e[0]||"")+e.slice(1).split("").map(function(e){return z(1)?z():e}).join("")),e}),l(ie,"$toCapitalize",function(){return this.substr(0,1).toUpperCase()+this.substr(1).toLowerCase()});var oe=/\+/g;function ae(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}l(window,"$querystring",{stringify:function(t){var e=h(arguments,1,"&"),n=h(arguments,2,"=");return f(t)?Object.keys(t).map(function(e){return encodeURIComponent(ae(e))+n+encodeURIComponent(ae(t[e]))}).join(e):""},parse:function(e){var t=h(arguments,1,"&"),n=h(arguments,2,"="),r={};if(!I(e))return r;for(var i,o,a,u,s=0,f=e.split(t),c=f.length;s<c;s++)-1<(u=(a=f[s].replace(oe,"%20")).indexOf(n))?(i=a.substr(0,u),o=a.substr(u+1)):i=a,i=decodeURIComponent(i),o=decodeURIComponent(o),r[i]=o;return r}}),l(window,"$ready",function(n,r){if("complete"===this.document.readyState)return n.apply(this,r);this.addEventListener("load",function e(t){this.removeEventListener(t.type,e),n.apply(this,r)})}),l(window,"$typeof",function(e){var t;return null==e?e+"":"object"==(t=typeof e)&&c(e)?"array":t});var ue,se=D(!0);o(se,"event",{get:function(){return ue},set:function(e){if(!T(e)||ue===e)return!1;(ue=e)?r?(l(g,"addEventListener",g.$on),l(g,"removeEventListener",g.$off)):g.forEach(function(e){l(e,"addEventListener",e.$on),l(e,"removeEventListener",e.$off)}):r?(l(g,"addEventListener",g.__ZENJS_EVENT_ADD__),l(g,"removeEventListener",g.__ZENJS_EVENT_REMOVE__)):g.forEach(function(e){l(e,"addEventListener",e.__ZENJS_EVENT_ADD__),l(e,"removeEventListener",e.__ZENJS_EVENT_REMOVE__)})}}),(A.config=D(!0)).inject=se,G(se).forEach(function(e){se[e]=!0});var fe=1;o(A,"guid",{get:function(){return fe++}});var ce=A.util=D(!0);ce.is=D(!0,{equals:v,congruence:d}),ce.types=D(!0,{isArray:c,isBoolean:T,isFunction:p,isNumber:W,isObject:f,isRegExp:ne,isString:I}),ce.parameters=D(!0,{default:h,rest:i}),ce.fn=D(!0,{returnTrue:P,returnFalse:L}),ce.supports=D(!0,{passiveEvent:M,EventTarget:r})});