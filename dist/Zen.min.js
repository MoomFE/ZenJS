/*!
 * Zen.js v1.0.0-alpha.0
 * (c) 2018 Zhang_Wei
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var c=Array.isArray,i=Object.defineProperty;function a(t,e,n,r){c(t)&&t instanceof Array?t.forEach(function(t){a(t,e,n,r)}):i(t,e,Object.assign({},n,r))}var o={configurable:!0,enumerable:!1,writable:!0},t={configurable:!0,enumerable:!1};function e(t,e,n,r){return a(t,e,{value:n},r||o),n}var n=Array.prototype;function l(t,e,n){var r;return t.length>e&&void 0!==(r=t[e])?r:n}function u(t,e){var n=t.length;return e<n?Array.from(t).$get(e,n):[]}function s(t){return"function"==typeof t}function f(t,e){return t===e}function p(t,e){return t==e}e(n,"$get",function(){var t=l(arguments,0,0),e=arguments[1];return null==e?this[t]:this.slice(t,e)}),e(n,"$add",function(t){for(var e=0,n=u(arguments,1),r=n.length;e<r;e++)this.splice(t++,0,n[e]);return this}),e(Array,"$create",function(t,e){var n=0,r=[];for(t>>=0;n<t;n++)r.push(e&&s(e)?e(n):e);return r}),e(n,"$delete",function(t){var e=l(arguments,1,1);return this.splice(t,e),this}),e(n,"$deleteValue",function(t){for(var e=l(arguments,1,!0)?f:p,n=0,r=this.length;n<r;)e(this[n],t)?(this.$delete(n),r--):n++;return this}),e(n,"$each",function(t){for(var e,n=0,r=this.length;n<r&&(e=this[n],!1!==t.call(e,e,n,this));n++);return this}),e(n,"$inArray",function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return!0;return!1}),"push_unshift_pop_shift".split("_").forEach(function(t){e(n,"$"+t,function(){return this[t].apply(this,arguments),this})}),e(document,"$ready",function(n,r){if("complete"===this.readyState||"loading"!==this.readyState&&!this.documentElement.doScroll)return n.apply(window,r);this.addEventListener("DOMContentLoaded",function t(e){this.removeEventListener(e.type,t),n.apply(window,r)})});var r=Element.prototype,h=[window,document,r];function d(t){for(var e in t)return!1;return!0}function v(t){return null!==t&&"object"==typeof t}function g(t){return t[t]||(t[t]={})}e(Object,"$isEmptyObject",d),e(h,"$data",function t(e,n,r){var i=g(this);if(v(e)){for(var a in e)t.call(this,a,e[a],n);return this}return arguments.length<2||r?null==e?i:!r||e in i?i[e]:i[e]=n:(i[e]=n,this)}),e(h,"$hasData",function(t){var e=g(this);return!d(e)&&(null==t||t in e)}),e(h,"$deleteData",function(t){if(null==t)return this[this]={},this;var e=g(this);return t.split(" ").forEach(function(t){delete e[t]}),this});var y=/^([^.]*)(?:\.(.+)|)/,m=Object.prototype,b=m.toString,$=Object.getPrototypeOf,E=Object.hasOwnProperty,j=E.toString,w=j.call(Object);function O(t){if(!t||"[object Object]"!==b.call(t))return!1;var e=$(t);if(!e)return!0;var n=E.call(e,"constructor")&&e.constructor;return s(n)&&j.call(n)===w}function P(){for(var t,e,n,r,i,a,o=1,u=arguments.length,s=arguments[0]||{};o<u;o++)if(null!=(t=arguments[o]))for(e in t)(r=t[e])!==s&&(n=s[e],r&&(O(r)||(i=c(r)))?(i?(i=!1,a=n&&c(n)?n:[]):a=n&&O(n)?n:{},s[e]=P(a,r)):void 0!==r&&(s[e]=r));return s}e(Object,"$isPlainObject",O),e(Object,"$assign",P);var S=Object.create;function C(t){return"boolean"==typeof t}function T(t){var e=u(arguments,1);return C(t)||!t?e.unshift(t?S(null):{}):e.unshift({},t),P.apply(null,e)}e(Object,"$create",T);var A=window.Zen=T(!0,{version:"1.0.0-alpha.0"});function L(){return!1}function D(){return!0}var k=Object.assign;function I(t,e){if(this instanceof A.Event==!1)return new A.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?D:L,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&P(this,e),this.timeStamp=t&&t.timeStamp||Date.now()}A.Event=I;var _=A.Event.prototype={constructor:A.Event,isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L,isSimulated:!1};[["preventDefault","isDefaultPrevented"],["stopPropagation","isPropagationStopped"],["stopImmediatePropagation","isImmediatePropagationStopped"]].forEach(function(t){var e=t[0],n=t[1];_[e]=function(){var t;_[n]()||(_[n]=D,!_.isSimulated&&(t=_.originalEvent)&&t[e]())}}),["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches"].forEach(function(e){i(_,e,k({},t,{get:function(){var t=this.originalEvent;if(t)return t[e]},set:function(t){this.$set(e,t)}}))}),e(m,"$set",function(t,e){var n;if(v(t))for(n in t)this[n]=t[n];else this[t]=e;return this});var x=A.EventListener={add:function(t,e,n,r,i){for(var a,o,u,s=t.$data("events",{},!0),c=e.length;c--;)(o=(a=y.exec(e[c])||[""])[1])&&(u={elem:t,type:o,listener:r,selector:n,options:i,namespace:(a[2]||"").split(".").sort(),handle:function(){return A.EventListener.dispatch.apply(u,arguments)}},(s[o]||(s[o]=[])).push(u),i.passive?t.addEventListener(o,u.handle,i):t.addEventListener(o,u.handle,i.capture||!1))},dispatch:function(t){var e=this.elem,n=t instanceof I?t:new I(t),r=Array.from(arguments).$set(0,n);n.delegateTarget=e,n.handleOptions=this;var i=n.type,a=this.selector;if(this.needsContext,a&&!("click"===i&&1<=n.button)){for(var o=n.target;o!==e;o=o.parentNode||e)if(1===o.nodeType&&("click"!==i||!0!==o.disabled)&&o.matches(a)){e=n.currentTarget=o;break}if(n.delegateTarget===e)return}var u=this.listener.apply(e,r);return!1===u&&(n.preventDefault(),n.stopPropagation()),u}},M=/[^\x20\t\r\n\f]+/g,N=!1;try{var R=i({},"passive",{get:function(){N=!0}});window.addEventListener("test",null,R)}catch(t){}function U(t){return"string"==typeof t}e(EventTarget.prototype,"$on",function(t,e,n,r){return function t(e,n,r,i,a){var o;if(v(n)?(o=n,U(r)?a=i:(a=r,r=void 0)):v(r)&&(o=r,r=n,a=i),o){for(var u in o)t(e,u,r,o[u],a);return e}if(0==n||null==n)return e;if(null==(n=n.match(M))||0===n.length)return e;if(!U(r)){var s=[r,i];i=s[0],U(r=s[1])||(a=r,r=void 0)}if(null==i)return e;if(C(i)&&(i=i?D:L),!i)return e;if(C(a)&&(a={capture:a}),a=a||{},Object.keys(a).forEach(function(t){a[t]?a[t]=!0:delete a[t]}),"once"in a){var c=i;i=function(t){return e.$off(t),c.apply(this,arguments)},delete a.once}return"passive"in a&&!N&&delete a.passive,x.add(e,n,r,i,a),e}(this,t,e,n,r)}),e(Math,"$mean",function(){return Array.from(arguments).reduce(function(t,e){return t+e})/arguments.length});var K=Math.random,X=Math.floor;function Y(t){var e=l(t,0,9),n=l(t,1,0);return n<e?[n,e]:[e,n]}function V(t,e){return X(K()*(e-t+1)+t)}function F(){var t=Y(arguments);return V(t[0],t[1])}e(Math,"$random",F);var q,z=Math.abs;function Z(){return this}e(Math,"$randomPlus",function(){var t=Y(arguments),e=t[0],n=t[1];return 0<e?V(e,n):n<(t=V(0,n+z(e)))?n-t:t}),e(Number,"$isNumber",function(t){return e=t,!("[object Number]"!==b.call(e)&&"string"!=typeof t||isNaN(t-parseFloat(t)));var e}),e(m,"$delete",function(){var e=this;return Array.from(arguments).$each(function(t){delete e[t]}),this}),e(m,"$deleteValue",function(t){var e,n=l(arguments,1,!0)?f:p;for(e in this)n(this[e],t)&&delete this[e];return this}),e(Object,"$each",function(t,e){var n,r;for(n in t)if(r=t[n],!1===e.call(r,n,r,t))break;return t}),e(m,"$get",function(t){return this[t]}),e(m,"$self",Z),a(m,"__self__",{get:Z},q||t);var B=String.fromCharCode;function G(){var t=l(arguments,0,!1);return B(t?F(65,90):F(97,122))}e(String,"$random",G);var H=/([\.\*\+\?\|\(\)\[\]\{\}\^\$])/g,J=String.prototype;e(J,"$replaceAll",function(t,e){var n,r="g";if(n=t,"[object RegExp]"===b.call(n)){if(t.global)return this.replace(t,e);r+=t.flags||"",t=t.source}else t=t.replace(H,"\\$1");return this.replace(new RegExp(t,r),e)}),e(String,"$someRandom",function(){for(var t="",e=l(arguments,0,12),n=l(arguments,1,!1),r=l(arguments,2,!1);0<e--;)t+=G();return n&&(t=t.split("").map(function(t){return F(1)?t.toUpperCase():t}).join()),r&&(t=t.split("").map(function(t){return F(1)?K():t}).$set(0,G(F(1))).join()),t}),e(J,"$toCapitalize",function(){return this.substr(0,1).toUpperCase()+this.substr(1).toLowerCase()});var Q=/\+/g;function W(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e(window,"$querystring",{stringify:function(e){var t=l(arguments,1,"&"),n=l(arguments,2,"=");return v(e)?Object.keys(e).map(function(t){return encodeURIComponent(W(t))+n+encodeURIComponent(W(e[t]))}).join(t):""},parse:function(t){var e=l(arguments,1,"&"),n=l(arguments,2,"="),r={};if(!U(t))return r;for(var i,a,o,u=0,s="",c=t.split(e),f=c.length;u<f;u++)-1<(s=(o=c[u].replace(Q,"%20")).indexOf(n))?(i=o.substr(0,s),a=o.substr(s+1)):i=o,i=decodeURIComponent(i),a=decodeURIComponent(a),r[i]=a;return r}}),e(window,"$ready",function(n,r){if("complete"===this.document.readyState)return n.apply(this,r);this.addEventListener("load",function t(e){this.removeEventListener(e.type,t),n.apply(this,r)})}),e(window,"$typeof",function(t){var e;return null==t?t+"":"object"==(e=typeof t)&&c(t)?"array":e});var tt=1;i(A,"guid",{get:function(){return tt++}})});